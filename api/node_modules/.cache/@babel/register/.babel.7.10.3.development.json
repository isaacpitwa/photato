{
  "{\"sourceRoot\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"filename\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/isaacpitwa/projects/photo-gallery/api",
      "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/isaacpitwa/projects/photo-gallery/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _sequelize = require(\"sequelize\");\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _path = require(\"path\");\n\nvar _photo = _interopRequireDefault(require(\"./photo.model\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst config = {\n  port: 3001,\n  uploadDir: `${(0, _path.resolve)(__dirname, '..')}/uploads/`,\n  database: {\n    username: \"root\",\n    password: \"admin\",\n    host: \"localhost\",\n    port: \"3306\",\n    dialect: \"mysql\",\n    database: \"photato\"\n  }\n};\nlet app = (0, _express.default)();\napp.server = _http.default.createServer(app); // 3rd party middlewares\n\napp.use((0, _cors.default)({})); // setup multer\n\nconst uploadMiddleware = (0, _multer.default)({\n  dest: config.uploadDir,\n  fileFilter: function (req, file, cb) {\n    if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n      return cb(new Error('Only image files are allowed!'));\n    }\n\n    cb(null, true);\n  }\n}).single('photo'); // connect to db\n\nconst database = new _sequelize.Sequelize(config.database);\n\nconst Photo = _photo.default.init(database);\n\ndatabase.sync().then(() => {\n  app.get('/', (req, res) => {\n    res.json({\n      app: 'photato'\n    });\n  });\n  app.server.listen(config.port, () => {\n    console.log(`Started on port ${app.server.address().port}`);\n  });\n});\napp.post('/photo', uploadMiddleware, async (req, res) => {\n  try {\n    const photo = await Photo.create(req.file);\n    res.json({\n      success: true,\n      photo\n    });\n  } catch (err) {\n    res.status(422).json({\n      success: false,\n      message: err.message\n    });\n  }\n});\napp.get('/photo', async (req, res) => {\n  const photos = await Photo.findAndCountAll();\n  res.json({\n    success: true,\n    photos\n  });\n});\napp.get(\"/photo/:filename\", (req, res) => {\n  res.sendFile(join(config.uploadDir, `/${req.params.filename}`));\n});\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsInBvcnQiLCJ1cGxvYWREaXIiLCJfX2Rpcm5hbWUiLCJkYXRhYmFzZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJob3N0IiwiZGlhbGVjdCIsImFwcCIsInNlcnZlciIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJ1c2UiLCJ1cGxvYWRNaWRkbGV3YXJlIiwiZGVzdCIsImZpbGVGaWx0ZXIiLCJyZXEiLCJmaWxlIiwiY2IiLCJvcmlnaW5hbG5hbWUiLCJtYXRjaCIsIkVycm9yIiwic2luZ2xlIiwiU2VxdWVsaXplIiwiUGhvdG8iLCJQaG90b01vZGVsIiwiaW5pdCIsInN5bmMiLCJ0aGVuIiwiZ2V0IiwicmVzIiwianNvbiIsImxpc3RlbiIsImNvbnNvbGUiLCJsb2ciLCJhZGRyZXNzIiwicG9zdCIsInBob3RvIiwiY3JlYXRlIiwic3VjY2VzcyIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJwaG90b3MiLCJmaW5kQW5kQ291bnRBbGwiLCJzZW5kRmlsZSIsImpvaW4iLCJwYXJhbXMiLCJmaWxlbmFtZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHO0FBQ1hDLEVBQUFBLElBQUksRUFBRSxJQURLO0FBRVhDLEVBQUFBLFNBQVMsRUFBRyxHQUFFLG1CQUFRQyxTQUFSLEVBQW1CLElBQW5CLENBQXlCLFdBRjVCO0FBR1hDLEVBQUFBLFFBQVEsRUFBRTtBQUNOQyxJQUFBQSxRQUFRLEVBQUUsTUFESjtBQUVOQyxJQUFBQSxRQUFRLEVBQUUsT0FGSjtBQUdOQyxJQUFBQSxJQUFJLEVBQUUsV0FIQTtBQUlOTixJQUFBQSxJQUFJLEVBQUUsTUFKQTtBQUtOTyxJQUFBQSxPQUFPLEVBQUUsT0FMSDtBQU1OSixJQUFBQSxRQUFRLEVBQUU7QUFOSjtBQUhDLENBQWY7QUFhQSxJQUFJSyxHQUFHLEdBQUcsdUJB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QUFqQjtBQUNILENBRkQ7ZUFJZXhDLEciLCJzb3VyY2VSb290IjoiL1VzZXJzL2lzYWFjcGl0d2EvcHJvamVjdHMvcGhvdG8tZ2FsbGVyeS9hcGkvc3JjLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IFNlcXVlbGl6ZSB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgUGhvdG9Nb2RlbCBmcm9tICcuL3Bob3RvLm1vZGVsJztcblxuY29uc3QgY29uZmlnID0ge1xuICAgIHBvcnQ6IDMwMDEsXG4gICAgdXBsb2FkRGlyOiBgJHtyZXNvbHZlKF9fZGlybmFtZSwgJy4uJyl9L3VwbG9hZHMvYCxcbiAgICBkYXRhYmFzZToge1xuICAgICAgICB1c2VybmFtZTogXCJyb290XCIsXG4gICAgICAgIHBhc3N3b3JkOiBcImFkbWluXCIsXG4gICAgICAgIGhvc3Q6IFwibG9jYWxob3N0XCIsXG4gICAgICAgIHBvcnQ6IFwiMzMwNlwiLFxuICAgICAgICBkaWFsZWN0OiBcIm15c3FsXCIsXG4gICAgICAgIGRhdGFiYXNlOiBcInBob3RhdG9cIixcbiAgICB9XG59O1xuXG5sZXQgYXBwID0gZXhwcmVzcygpO1xuYXBwLnNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcCk7XG5cbi8vIDNyZCBwYXJ0eSBtaWRkbGV3YXJlc1xuYXBwLnVzZShjb3JzKHt9KSk7XG5cbi8vIHNldHVwIG11bHRlclxuY29uc3QgdXBsb2FkTWlkZGxld2FyZSA9IG11bHRlcih7IFxuICAgIGRlc3Q6IGNvbmZpZy51cGxvYWREaXIsXG4gICAgZmlsZUZpbHRlcjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcbiAgICAgICAgaWYgKCFmaWxlLm9yaWdpbmFsbmFtZS5tYXRjaCgvXFwuKGpwZ3xqcGVnfHBuZ3xnaWYpJC8pKSB7XG4gICAgICAgICAgICByZXR1cm4gY2IobmV3IEVycm9yKCdPbmx5IGltYWdlIGZpbGVzIGFyZSBhbGxvd2VkIScpKTtcbiAgICAgICAgfVxuICAgICAgICBjYihudWxsLCB0cnVlKTtcbiAgICB9LCBcbn0pLnNpbmdsZSgncGhvdG8nKTtcbi8vIGNvbm5lY3QgdG8gZGJcbmNvbnN0IGRhdGFiYXNlID0gbmV3IFNlcXVlbGl6ZShjb25maWcuZGF0YWJhc2UpO1xuY29uc3QgUGhvdG8gPSBQaG90b01vZGVsLmluaXQoZGF0YWJhc2UpO1xuXG5cbmRhdGFiYXNlLnN5bmMoKS50aGVuKCgpID0+IHtcbiAgICBhcHAuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5qc29uKHthcHA6ICdwaG90YXRvJ30pO1xuICAgIH0pO1xuXG4gICAgYXBwLnNlcnZlci5saXN0ZW4oY29uZmlnLnBvcnQsICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFN0YXJ0ZWQgb24gcG9ydCAke2FwcC5zZXJ2ZXIuYWRkcmVzcygpLnBvcnR9YCk7XG4gICAgfSk7XG59KTtcblxuYXBwLnBvc3QoJy9waG90bycsIHVwbG9hZE1pZGRsZXdhcmUsYXN5bmMocmVxLCByZXMpPT57XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGhvdG8gPSAgYXdhaXQgUGhvdG8uY3JlYXRlKHJlcS5maWxlKTtcbiAgICAgICAgcmVzLmpzb24oe3N1Y2Nlc3M6IHRydWUsIHBob3RvfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDIyKS5qc29uKHtzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyLm1lc3NhZ2V9KTtcbiAgICB9XG59KTtcblxuYXBwLmdldCgnL3Bob3RvJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgcGhvdG9zID0gYXdhaXQgUGhvdG8uZmluZEFuZENvdW50QWxsKCk7XG4gICAgcmVzLmpzb24oe3N1Y2Nlc3M6IHRydWUsIHBob3Rvc30pO1xufSk7XG5hcHAuZ2V0KFwiL3Bob3RvLzpmaWxlbmFtZVwiLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZEZpbGUoam9pbihjb25maWcudXBsb2FkRGlyLCBgLyR7cmVxLnBhcmFtcy5maWxlbmFtZX1gKSk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXBwIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "config",
        "port",
        "uploadDir",
        "__dirname",
        "database",
        "username",
        "password",
        "host",
        "dialect",
        "app",
        "server",
        "http",
        "createServer",
        "use",
        "uploadMiddleware",
        "dest",
        "fileFilter",
        "req",
        "file",
        "cb",
        "originalname",
        "match",
        "Error",
        "single",
        "Sequelize",
        "Photo",
        "PhotoModel",
        "init",
        "sync",
        "then",
        "get",
        "res",
        "json",
        "listen",
        "console",
        "log",
        "address",
        "post",
        "photo",
        "create",
        "success",
        "err",
        "status",
        "message",
        "photos",
        "findAndCountAll",
        "sendFile",
        "join",
        "params",
        "filename"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "sourcesContent": [
        "import http from 'http';\nimport cors from 'cors';\nimport express from 'express';\nimport { Sequelize } from 'sequelize';\nimport multer from 'multer';\nimport { resolve } from 'path';\nimport PhotoModel from './photo.model';\n\nconst config = {\n    port: 3001,\n    uploadDir: `${resolve(__dirname, '..')}/uploads/`,\n    database: {\n        username: \"root\",\n        password: \"admin\",\n        host: \"localhost\",\n        port: \"3306\",\n        dialect: \"mysql\",\n        database: \"photato\",\n    }\n};\n\nlet app = express();\napp.server = http.createServer(app);\n\n// 3rd party middlewares\napp.use(cors({}));\n\n// setup multer\nconst uploadMiddleware = multer({ \n    dest: config.uploadDir,\n    fileFilter: function (req, file, cb) {\n        if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n            return cb(new Error('Only image files are allowed!'));\n        }\n        cb(null, true);\n    }, \n}).single('photo');\n// connect to db\nconst database = new Sequelize(config.database);\nconst Photo = PhotoModel.init(database);\n\n\ndatabase.sync().then(() => {\n    app.get('/', (req, res) => {\n        res.json({app: 'photato'});\n    });\n\n    app.server.listen(config.port, () => {\n        console.log(`Started on port ${app.server.address().port}`);\n    });\n});\n\napp.post('/photo', uploadMiddleware,async(req, res)=>{\n    try {\n        const photo =  await Photo.create(req.file);\n        res.json({success: true, photo});\n    } catch (err) {\n        res.status(422).json({success: false, message: err.message});\n    }\n});\n\napp.get('/photo', async (req, res) => {\n    const photos = await Photo.findAndCountAll();\n    res.json({success: true, photos});\n});\napp.get(\"/photo/:filename\", (req, res) => {\n    res.sendFile(join(config.uploadDir, `/${req.params.filename}`));\n});\n\nexport default app"
      ]
    },
    "sourceType": "script",
    "mtime": 1593380396722
  },
  "{\"sourceRoot\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"filename\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/photo.model.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/isaacpitwa/projects/photo-gallery/api",
      "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/photo.model.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/isaacpitwa/projects/photo-gallery/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/isaacpitwa/projects/photo-gallery/api/src/photo.model.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/photo.model.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
        "sourceFileName": "photo.model.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _sequelize = require(\"sequelize\");\n\nconst PhotoSchema = {\n  originalname: {\n    type: _sequelize.DataTypes.STRING,\n    allowNull: false\n  },\n  mimetype: {\n    type: _sequelize.DataTypes.STRING,\n    allowNull: false\n  },\n  size: {\n    type: _sequelize.DataTypes.INTEGER,\n    allowNull: false\n  },\n  filename: {\n    type: _sequelize.DataTypes.STRING,\n    allowNull: false\n  },\n  path: {\n    type: _sequelize.DataTypes.STRING,\n    allowNull: false\n  }\n};\n\nclass PhotoModel extends _sequelize.Model {\n  static init(sequelize) {\n    return super.init(PhotoSchema, {\n      sequelize\n    });\n  }\n\n}\n\nvar _default = PhotoModel;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBob3RvLm1vZGVsLmpzIl0sIm5hbWVzIjpbIlBob3RvU2NoZW1hIiwib3JpZ2luYWxuYW1lIiwidHlwZSIsIkRhdGFUeXBlcyIsIlNUUklORyIsImFsbG93TnVsbCIsIm1pbWV0eXBlIiwic2l6ZSIsIklOVEVHRVIiLCJmaWxlbmFtZSIsInBhdGgiLCJQaG90b01vZGVsIiwiTW9kZWwiLCJpbml0Iiwic2VxdWVsaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsV0FBVyxHQUFHO0FBQ2hCQyxFQUFBQSxZQUFZLEVBQUU7QUFDVkMsSUFBQUEsSUFBSSxFQUFFQyxxQkFBVUMsTUFETjtBQUVWQyxJQUFBQSxTQUFTLEVBQUU7QUFGRCxHQURFO0FBS2hCQyxFQUFBQSxRQUFRLEVBQUU7QUFDTkosSUFBQUEsSUFBSSxFQUFFQyxxQkFBVUMsTUFEVjtBQUVOQyxJQUFBQSxTQUFTLEVBQUU7QUFGTCxHQUxNO0FBU2hCRSxFQUFBQSxJQUFJLEVBQUU7QUFDRkwsSUFBQUEsSUFBSSxFQUFFQyxxQkFBVUssT0FEZDtBQUVGSCxJQUFBQSxTQUFTLEVBQUU7QUFGVCxHQVRVO0FBYWhCSSxFQUFBQSxRQUFRLEVBQUU7QUFDTlAsSUFBQUEsSUFBSSxFQUFFQyxxQkFBVUMsTUFEVjtBQUVOQyxJQUFBQSxTQUFTLEVBQUU7QUFGTCxHQWJNO0FBaUJoQkssRUFBQUEsSUFBSSxFQUFFO0FBQ0ZSLElBQUFBLElBQUksRUFBRUMscUJBQVVDLE1BRGQ7QUFFRkMsSUFBQUEsU0FBUyxFQUFFO0FBRlQ7QUFqQlUsQ0FBcEI7O0FBdUJBLE1BQU1NLFVBQU4sU0FBeUJDLGdCQUF6QixDQUErQjtBQUMzQixTQUFPQyxJQUFQLENBQWFDLFNBQWIsRUFBd0I7QUFDcEIsV0FBTyxNQUFNRCxJQUFOLENBQVdiLFdBQVgsRUFBd0I7QUFBRWMsTUFBQUE7QUFBRixLQUF4QixDQUFQO0FBQ0g7O0FBSDBCOztlQU1oQkgsVSIsInNvdXJjZVJvb3QiOiIvVXNlcnMvaXNhYWNwaXR3YS9wcm9qZWN0cy9waG90by1nYWxsZXJ5L2FwaS9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kZWwsIERhdGFUeXBlcyB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmNvbnN0IFBob3RvU2NoZW1hID0ge1xuICAgIG9yaWdpbmFsbmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgbWltZXR5cGU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLlNUUklORyxcbiAgICAgICAgYWxsb3dOdWxsOiBmYWxzZSxcbiAgICB9LFxuICAgIHNpemU6IHtcbiAgICAgICAgdHlwZTogRGF0YVR5cGVzLklOVEVHRVIsXG4gICAgICAgIGFsbG93TnVsbDogZmFsc2UsXG4gICAgfSxcbiAgICBmaWxlbmFtZToge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG4gICAgcGF0aDoge1xuICAgICAgICB0eXBlOiBEYXRhVHlwZXMuU1RSSU5HLFxuICAgICAgICBhbGxvd051bGw6IGZhbHNlLFxuICAgIH0sXG59O1xuXG5jbGFzcyBQaG90b01vZGVsIGV4dGVuZHMgTW9kZWwge1xuICAgIHN0YXRpYyBpbml0IChzZXF1ZWxpemUpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoUGhvdG9TY2hlbWEsIHsgc2VxdWVsaXplIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGhvdG9Nb2RlbDsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "photo.model.js"
      ],
      "names": [
        "PhotoSchema",
        "originalname",
        "type",
        "DataTypes",
        "STRING",
        "allowNull",
        "mimetype",
        "size",
        "INTEGER",
        "filename",
        "path",
        "PhotoModel",
        "Model",
        "init",
        "sequelize"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA,MAAMA,WAAW,GAAG;AAChBC,EAAAA,YAAY,EAAE;AACVC,IAAAA,IAAI,EAAEC,qBAAUC,MADN;AAEVC,IAAAA,SAAS,EAAE;AAFD,GADE;AAKhBC,EAAAA,QAAQ,EAAE;AACNJ,IAAAA,IAAI,EAAEC,qBAAUC,MADV;AAENC,IAAAA,SAAS,EAAE;AAFL,GALM;AAShBE,EAAAA,IAAI,EAAE;AACFL,IAAAA,IAAI,EAAEC,qBAAUK,OADd;AAEFH,IAAAA,SAAS,EAAE;AAFT,GATU;AAahBI,EAAAA,QAAQ,EAAE;AACNP,IAAAA,IAAI,EAAEC,qBAAUC,MADV;AAENC,IAAAA,SAAS,EAAE;AAFL,GAbM;AAiBhBK,EAAAA,IAAI,EAAE;AACFR,IAAAA,IAAI,EAAEC,qBAAUC,MADd;AAEFC,IAAAA,SAAS,EAAE;AAFT;AAjBU,CAApB;;AAuBA,MAAMM,UAAN,SAAyBC,gBAAzB,CAA+B;AAC3B,SAAOC,IAAP,CAAaC,SAAb,EAAwB;AACpB,WAAO,MAAMD,IAAN,CAAWb,WAAX,EAAwB;AAAEc,MAAAA;AAAF,KAAxB,CAAP;AACH;;AAH0B;;eAMhBH,U",
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "sourcesContent": [
        "import { Model, DataTypes } from 'sequelize';\n\nconst PhotoSchema = {\n    originalname: {\n        type: DataTypes.STRING,\n        allowNull: false,\n    },\n    mimetype: {\n        type: DataTypes.STRING,\n        allowNull: false,\n    },\n    size: {\n        type: DataTypes.INTEGER,\n        allowNull: false,\n    },\n    filename: {\n        type: DataTypes.STRING,\n        allowNull: false,\n    },\n    path: {\n        type: DataTypes.STRING,\n        allowNull: false,\n    },\n};\n\nclass PhotoModel extends Model {\n    static init (sequelize) {\n        return super.init(PhotoSchema, { sequelize });\n    }\n}\n\nexport default PhotoModel;"
      ]
    },
    "sourceType": "script",
    "mtime": 1593379150928
  }
}