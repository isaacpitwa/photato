{
  "{\"sourceRoot\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"filename\":\"/Users/isaacpitwa/projects/photo-gallery/api/src/index.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/isaacpitwa/projects/photo-gallery/api\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"proposal-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.10.3:development": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/isaacpitwa/projects/photo-gallery/api",
      "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/isaacpitwa/projects/photo-gallery/api",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "proposal-nullish-coalescing-operator",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "LogicalExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-chaining",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "OptionalCallExpression": {
              "enter": [
                null
              ]
            },
            "OptionalMemberExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-json-strings",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-optional-catch-binding",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-async-generators",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "syntax-object-rest-spread",
          "visitor": {
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "nullishCoalescingOperator",
          "optionalChaining",
          "jsonStrings",
          "optionalCatchBinding",
          "asyncGenerators",
          "objectRestSpread",
          "dynamicImport"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/isaacpitwa/projects/photo-gallery/api/src/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _http = _interopRequireDefault(require(\"http\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar _sequelize = require(\"sequelize\");\n\nvar _multer = _interopRequireDefault(require(\"multer\"));\n\nvar _path = require(\"path\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst config = {\n  port: 3001,\n  uploadDir: `${(0, _path.resolve)(__dirname, '..')}/uploads/`,\n  database: {\n    username: \"root\",\n    password: \"admin\",\n    host: \"localhost\",\n    port: \"3306\",\n    dialect: \"mysql\",\n    database: \"photato\"\n  }\n};\nlet app = (0, _express.default)();\napp.server = _http.default.createServer(app); // 3rd party middlewares\n\napp.use((0, _cors.default)({})); // setup multer\n\nconst uploadMiddleware = (0, _multer.default)({\n  dest: config.uploadDir,\n  fileFilter: function (req, file, cb) {\n    if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n      return cb(new Error('Only image files are allowed!'));\n    }\n\n    cb(null, true);\n  }\n}).single('photo'); // connect to db\n\nconst database = new _sequelize.Sequelize(config.database);\ndatabase.sync().then(() => {\n  app.get('/', (req, res) => {\n    res.json({\n      app: 'photato'\n    });\n  });\n  app.server.listen(config.port, () => {\n    console.log(`Started on port ${app.server.address().port}`);\n  });\n});\napp.post('/photo', uploadMiddleware, async (req, res) => {\n  try {\n    const photo = await Photo.create(req.file);\n    res.json({\n      success: true,\n      photo\n    });\n  } catch (err) {\n    res.status(422).json({\n      success: false,\n      message: err.message\n    });\n  }\n});\nvar _default = app;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsInBvcnQiLCJ1cGxvYWREaXIiLCJfX2Rpcm5hbWUiLCJkYXRhYmFzZSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJob3N0IiwiZGlhbGVjdCIsImFwcCIsInNlcnZlciIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJ1c2UiLCJ1cGxvYWRNaWRkbGV3YXJlIiwiZGVzdCIsImZpbGVGaWx0ZXIiLCJyZXEiLCJmaWxlIiwiY2IiLCJvcmlnaW5hbG5hbWUiLCJtYXRjaCIsIkVycm9yIiwic2luZ2xlIiwiU2VxdWVsaXplIiwic3luYyIsInRoZW4iLCJnZXQiLCJyZXMiLCJqc29uIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsImFkZHJlc3MiLCJwb3N0IiwicGhvdG8iLCJQaG90byIsImNyZWF0ZSIsInN1Y2Nlc3MiLCJlcnIiLCJzdGF0dXMiLCJtZXNzYWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFDQSxNQUFNQSxNQUFNLEdBQUc7QUFDWEMsRUFBQUEsSUFBSSxFQUFFLElBREs7QUFFWEMsRUFBQUEsU0FBUyxFQUFHLEdBQUUsbUJBQVFDLFNBQVIsRUFBbUIsSUFBbkIsQ0FBeUIsV0FGNUI7QUFHWEMsRUFBQUEsUUFBUSxFQUFFO0FBQ05DLElBQUFBLFFBQVEsRUFBRSxNQURKO0FBRU5DLElBQUFBLFFBQVEsRUFBRSxPQUZKO0FBR05DLElBQUFBLElBQUksRUFBRSxXQUhBO0FBSU5OLElBQUFBLElBQUksRUFBRSxNQUpBO0FBS05PLElBQUFBLE9BQU8sRUFBRSxPQUxIO0FBTU5KLElBQUFBLFFBQVEsRUFBRTtBQU5KO0FBSEMsQ0FBZjtBQWFBLElBQUlLLEdBQUcsR0FBRyx1QkFBVjtBQUNBQSxHQUFHLENBQUNDLE1BQUosR0FBYUMsY0FBS0MsWUFBTCxDQUFrQkgsR0FBbEIsQ0FBYixDLENBRUE7O0FBQ0FBLEdBQUcsQ0FBQ0ksR0FBSixDQUFRLG1CQUFLLEVBQUwsQ0FBUixFLENBRUE7O0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcscUJBQU87QUFDNUJDLEVBQUFBLElBQUksRUFBRWYsTUFBTSxDQUFDRSxTQURlO0FBRTVCYyxFQUFBQSxVQUFVLEVBQUUsVUFBVUMsR0FBVixFQUFlQyxJQUFmLEVBQXFCQyxFQUFyQixFQUF5QjtBQUNqQyxRQUFJLENBQUNELElBQUksQ0FBQ0UsWUFBTCxDQUFrQkMsS0FBbEIsQ0FBd0IsdUJBQXhCLENBQUwsRUFBdUQ7QUFDbkQsYUFBT0YsRUFBRSxDQUFDLElBQUlHLEtBQUosQ0FBVSwrQkFBVixDQUFELENBQVQ7QUFDSDs7QUFDREgsSUFBQUEsRUFBRSxDQUFDLElBQUQsRUFBTyxJQUFQLENBQUY7QUFDSDtBQVAyQixDQUFQLEVBUXRCSSxNQVJzQixDQVFmLE9BUmUsQ0FBekIsQyxDQVNBOztBQUNBLE1BQU1uQixRQUFRLEdBQUcsSUFBSW9CLG9CQUFKLENBQWN4QixNQUFNLENBQUNJLFFBQXJCLENBQWpCO0FBRUFBLFFBQVEsQ0FBQ3FCLElBQVQsR0FBZ0JDLElBQWhCLENBQXFCLE1BQU07QUFDdkJqQixFQUFBQSxHQUFHLENBQUNrQixHQUFKLENBQVEsR0FBUixFQUFhLENBQUNWLEdBQUQsRUFBTVcsR0FBTixLQUFjO0FBQ3ZCQSxJQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUztBQUFDcEIsTUFBQUEsR0FBRyxFQUFFO0FBQU4sS0FBVDtBQUNILEdBRkQ7QUFJQUEsRUFBQUEsR0FBRyxDQUFDQyxNQUFKLENBQVdvQixNQUFYLENBQWtCOUIsTUFBTSxDQUFDQyxJQUF6QixFQUErQixNQUFNO0FBQ2pDOEIsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQWEsbUJBQWtCdkIsR0FBRyxDQUFDQyxNQUFKLENBQVd1QixPQUFYLEdBQXFCaEMsSUFBSyxFQUF6RDtBQUNILEdBRkQ7QUFHSCxDQVJEO0FBVUFRLEdBQUcsQ0FBQ3lCLElBQUosQ0FBUyxRQUFULEVBQW1CcEIsZ0JBQW5CLEVBQXFDLE9BQU9HLEdBQVAsRUFBWVcsR0FBWixLQUFvQjtBQUNyRCxNQUFJO0FBQ0EsVUFBTU8sS0FBSyxHQUFHLE1BQU1DLEtBQUssQ0FBQ0MsTUFBTixDQUFhcEIsR0FBRyxDQUFDQyxJQUFqQixDQUFwQjtBQUNBVSxJQUFBQSxHQUFHLENBQUNDLElBQUosQ0FBUztBQUFDUyxNQUFBQSxPQUFPLEVBQUUsSUFBVjtBQUFnQkgsTUFBQUE7QUFBaEIsS0FBVDtBQUNILEdBSEQsQ0FHRSxPQUFPSSxHQUFQLEVBQVk7QUFDVlgsSUFBQUEsR0FBRyxDQUFDWSxNQUFKLENBQVcsR0FBWCxFQUFnQlgsSUFBaEIsQ0FBcUI7QUFBQ1MsTUFBQUEsT0FBTyxFQUFFLEtBQVY7QUFBaUJHLE1BQUFBLE9BQU8sRUFBRUYsR0FBRyxDQUFDRTtBQUE5QixLQUFyQjtBQUNIO0FBQ0osQ0FQRDtlQVNlaEMsRyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvaXNhYWNwaXR3YS9wcm9qZWN0cy9waG90by1nYWxsZXJ5L2FwaS9zcmMvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgU2VxdWVsaXplIH0gZnJvbSAnc2VxdWVsaXplJztcbmltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmNvbnN0IGNvbmZpZyA9IHtcbiAgICBwb3J0OiAzMDAxLFxuICAgIHVwbG9hZERpcjogYCR7cmVzb2x2ZShfX2Rpcm5hbWUsICcuLicpfS91cGxvYWRzL2AsXG4gICAgZGF0YWJhc2U6IHtcbiAgICAgICAgdXNlcm5hbWU6IFwicm9vdFwiLFxuICAgICAgICBwYXNzd29yZDogXCJhZG1pblwiLFxuICAgICAgICBob3N0OiBcImxvY2FsaG9zdFwiLFxuICAgICAgICBwb3J0OiBcIjMzMDZcIixcbiAgICAgICAgZGlhbGVjdDogXCJteXNxbFwiLFxuICAgICAgICBkYXRhYmFzZTogXCJwaG90YXRvXCIsXG4gICAgfVxufTtcblxubGV0IGFwcCA9IGV4cHJlc3MoKTtcbmFwcC5zZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuXG4vLyAzcmQgcGFydHkgbWlkZGxld2FyZXNcbmFwcC51c2UoY29ycyh7fSkpO1xuXG4vLyBzZXR1cCBtdWx0ZXJcbmNvbnN0IHVwbG9hZE1pZGRsZXdhcmUgPSBtdWx0ZXIoeyBcbiAgICBkZXN0OiBjb25maWcudXBsb2FkRGlyLFxuICAgIGZpbGVGaWx0ZXI6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XG4gICAgICAgIGlmICghZmlsZS5vcmlnaW5hbG5hbWUubWF0Y2goL1xcLihqcGd8anBlZ3xwbmd8Z2lmKSQvKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNiKG5ldyBFcnJvcignT25seSBpbWFnZSBmaWxlcyBhcmUgYWxsb3dlZCEnKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2IobnVsbCwgdHJ1ZSk7XG4gICAgfSwgXG59KS5zaW5nbGUoJ3Bob3RvJyk7XG4vLyBjb25uZWN0IHRvIGRiXG5jb25zdCBkYXRhYmFzZSA9IG5ldyBTZXF1ZWxpemUoY29uZmlnLmRhdGFiYXNlKTtcblxuZGF0YWJhc2Uuc3luYygpLnRoZW4oKCkgPT4ge1xuICAgIGFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmpzb24oe2FwcDogJ3Bob3RhdG8nfSk7XG4gICAgfSk7XG5cbiAgICBhcHAuc2VydmVyLmxpc3Rlbihjb25maWcucG9ydCwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgU3RhcnRlZCBvbiBwb3J0ICR7YXBwLnNlcnZlci5hZGRyZXNzKCkucG9ydH1gKTtcbiAgICB9KTtcbn0pO1xuXG5hcHAucG9zdCgnL3Bob3RvJywgdXBsb2FkTWlkZGxld2FyZSwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGhvdG8gPSBhd2FpdCBQaG90by5jcmVhdGUocmVxLmZpbGUpO1xuICAgICAgICByZXMuanNvbih7c3VjY2VzczogdHJ1ZSwgcGhvdG99KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oe3N1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBlcnIubWVzc2FnZX0pO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcHAiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "config",
        "port",
        "uploadDir",
        "__dirname",
        "database",
        "username",
        "password",
        "host",
        "dialect",
        "app",
        "server",
        "http",
        "createServer",
        "use",
        "uploadMiddleware",
        "dest",
        "fileFilter",
        "req",
        "file",
        "cb",
        "originalname",
        "match",
        "Error",
        "single",
        "Sequelize",
        "sync",
        "then",
        "get",
        "res",
        "json",
        "listen",
        "console",
        "log",
        "address",
        "post",
        "photo",
        "Photo",
        "create",
        "success",
        "err",
        "status",
        "message"
      ],
      "mappings": ";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA,MAAMA,MAAM,GAAG;AACXC,EAAAA,IAAI,EAAE,IADK;AAEXC,EAAAA,SAAS,EAAG,GAAE,mBAAQC,SAAR,EAAmB,IAAnB,CAAyB,WAF5B;AAGXC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,QAAQ,EAAE,MADJ;AAENC,IAAAA,QAAQ,EAAE,OAFJ;AAGNC,IAAAA,IAAI,EAAE,WAHA;AAINN,IAAAA,IAAI,EAAE,MAJA;AAKNO,IAAAA,OAAO,EAAE,OALH;AAMNJ,IAAAA,QAAQ,EAAE;AANJ;AAHC,CAAf;AAaA,IAAIK,GAAG,GAAG,uBAAV;AACAA,GAAG,CAACC,MAAJ,GAAaC,cAAKC,YAAL,CAAkBH,GAAlB,CAAb,C,CAEA;;AACAA,GAAG,CAACI,GAAJ,CAAQ,mBAAK,EAAL,CAAR,E,CAEA;;AACA,MAAMC,gBAAgB,GAAG,qBAAO;AAC5BC,EAAAA,IAAI,EAAEf,MAAM,CAACE,SADe;AAE5Bc,EAAAA,UAAU,EAAE,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjC,QAAI,CAACD,IAAI,CAACE,YAAL,CAAkBC,KAAlB,CAAwB,uBAAxB,CAAL,EAAuD;AACnD,aAAOF,EAAE,CAAC,IAAIG,KAAJ,CAAU,+BAAV,CAAD,CAAT;AACH;;AACDH,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACH;AAP2B,CAAP,EAQtBI,MARsB,CAQf,OARe,CAAzB,C,CASA;;AACA,MAAMnB,QAAQ,GAAG,IAAIoB,oBAAJ,CAAcxB,MAAM,CAACI,QAArB,CAAjB;AAEAA,QAAQ,CAACqB,IAAT,GAAgBC,IAAhB,CAAqB,MAAM;AACvBjB,EAAAA,GAAG,CAACkB,GAAJ,CAAQ,GAAR,EAAa,CAACV,GAAD,EAAMW,GAAN,KAAc;AACvBA,IAAAA,GAAG,CAACC,IAAJ,CAAS;AAACpB,MAAAA,GAAG,EAAE;AAAN,KAAT;AACH,GAFD;AAIAA,EAAAA,GAAG,CAACC,MAAJ,CAAWoB,MAAX,CAAkB9B,MAAM,CAACC,IAAzB,EAA+B,MAAM;AACjC8B,IAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBvB,GAAG,CAACC,MAAJ,CAAWuB,OAAX,GAAqBhC,IAAK,EAAzD;AACH,GAFD;AAGH,CARD;AAUAQ,GAAG,CAACyB,IAAJ,CAAS,QAAT,EAAmBpB,gBAAnB,EAAqC,OAAOG,GAAP,EAAYW,GAAZ,KAAoB;AACrD,MAAI;AACA,UAAMO,KAAK,GAAG,MAAMC,KAAK,CAACC,MAAN,CAAapB,GAAG,CAACC,IAAjB,CAApB;AACAU,IAAAA,GAAG,CAACC,IAAJ,CAAS;AAACS,MAAAA,OAAO,EAAE,IAAV;AAAgBH,MAAAA;AAAhB,KAAT;AACH,GAHD,CAGE,OAAOI,GAAP,EAAY;AACVX,IAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBX,IAAhB,CAAqB;AAACS,MAAAA,OAAO,EAAE,KAAV;AAAiBG,MAAAA,OAAO,EAAEF,GAAG,CAACE;AAA9B,KAArB;AACH;AACJ,CAPD;eASehC,G",
      "sourceRoot": "/Users/isaacpitwa/projects/photo-gallery/api/src/",
      "sourcesContent": [
        "import http from 'http';\nimport cors from 'cors';\nimport express from 'express';\nimport { Sequelize } from 'sequelize';\nimport multer from 'multer';\nimport { resolve } from 'path';\nconst config = {\n    port: 3001,\n    uploadDir: `${resolve(__dirname, '..')}/uploads/`,\n    database: {\n        username: \"root\",\n        password: \"admin\",\n        host: \"localhost\",\n        port: \"3306\",\n        dialect: \"mysql\",\n        database: \"photato\",\n    }\n};\n\nlet app = express();\napp.server = http.createServer(app);\n\n// 3rd party middlewares\napp.use(cors({}));\n\n// setup multer\nconst uploadMiddleware = multer({ \n    dest: config.uploadDir,\n    fileFilter: function (req, file, cb) {\n        if (!file.originalname.match(/\\.(jpg|jpeg|png|gif)$/)) {\n            return cb(new Error('Only image files are allowed!'));\n        }\n        cb(null, true);\n    }, \n}).single('photo');\n// connect to db\nconst database = new Sequelize(config.database);\n\ndatabase.sync().then(() => {\n    app.get('/', (req, res) => {\n        res.json({app: 'photato'});\n    });\n\n    app.server.listen(config.port, () => {\n        console.log(`Started on port ${app.server.address().port}`);\n    });\n});\n\napp.post('/photo', uploadMiddleware, async (req, res) => {\n    try {\n        const photo = await Photo.create(req.file);\n        res.json({success: true, photo});\n    } catch (err) {\n        res.status(422).json({success: false, message: err.message});\n    }\n});\n\nexport default app"
      ]
    },
    "sourceType": "script",
    "mtime": 1593378653792
  }
}